name: App Python
on:
  workflow_dispatch:
    inputs:
      name:
        description: "Digite seu nome"
        required: true
        default: "Desenvolvedor"
      ambiente:
        description: "Escolha o ambiente"
        required: true
        type: choice
        options:
          - "development"
          - "Production"
jobs:
  info:
    runs-on: ubuntu-latest
    steps:
      - name: "Mostrar Mensagem"
        run: echo "Ol√°! Este √© um workflow de exemplo para Python."
      - name: "Exibir Vers√£o do Python"
        run: python --version
      - name: "Falar com voc√™"
        id: saudacao
        run: |
          echo "Ol√°, ${{ github.event.inputs.name }}! Bem-vindo ao GitHub Actions."
          echo "usuario=${{ github.event.inputs.name }}" >> $GITHUB_OUTPUT
          echo "data=$(date)" >> $GITHUB_OUTPUT
      - name: "üéâ Step Secreto"
        if: github.event.inputs.name == 'especial'
        run: echo "üéâ Parab√©ns! Voc√™ descobriu o step secreto!"
      - name: "üöÄ Super Secreto"
        if: github.event.inputs.name == 'super'
        run: echo "üöÄ Wow! N√≠vel super alcan√ßado!"
      - name: "üëë Mestre secreto!"
        if: github.event.inputs.name == 'mestre'
        run: echo "üëë Voc√™ √© o mestre dos GitHub Actions!"
      - name: "Usar Output"
        run: |
          echo "Dados recebidos do step anterior:"
          echo "Usu√°rio: ${{ steps.saudacao.outputs.usuario }}"
          echo "Data: ${{ steps.saudacao.outputs.data }}"
      - name: "üìÑ Criar relat√≥rio"
        run: |
          echo "=== RELAT√ìRIO DO WORKFLOW ===" > relatorio.txt
          echo "Usu√°rio: ${{ github.event.inputs.name }}" >> relatorio.txt
          echo "Data: $(date)" >> relatorio.txt
          echo "Sistema: $(uname -a)" >> relatorio.txt
          echo "Workflow executado com sucesso!" >> relatorio.txt
      - name: "üì§ Salvar relat√≥rio"
        uses: actions/upload-artifact@v4
        with:
          name: relatorio-workflow
          path: relatorio.txt
  sistema:
    needs: info
    runs-on: ubuntu-latest
    steps:
      - name: "Sistema Operacional"
        run: uname -a
      - name: "üì• Baixar relat√≥rio"
        uses: actions/download-artifact@v4
        with:
          name: relatorio-workflow
      - name: "üìñ Ler relat√≥rio"
        run: |
          echo "=== CONTE√öDO DO RELAT√ìRIO ==="
          cat relatorio.txt
          echo "=== FIM DO RELAT√ìRIO ==="
  teste-matrix:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        python-version: [3.9, 3.11]
    steps:
      - name: "Setup Python ${{ matrix.python-version }}"
        uses: actions/setup-python@v4
        with:
          python-version: ${{ matrix.python-version }}
      - name: "Testar Python"
        run: |
          echo "Testando Python ${{ matrix.python-version }}"
          python --version
  deploy-dev:
    if: github.event.inputs.ambiente == 'development'
    runs-on: ubuntu-latest
    environment: development
    steps:
      - name: "Deploy Development"
        run: |
          echo "Fazendo deploy em DEVELOPMENT"
          echo "Usu√°rio: ${{ github.event.inputs.name }}"
          echo "URL: https://dev.meuapp.com"
          echo "Deploy DEV conclu√≠do!"
  deploy-prod:
    if: github.event.inputs.ambiente == 'Production'
    runs-on: ubuntu-latest
    environment: production
    steps:
      - name: "Deploy Production"
        run: |
          echo "ATEN√á√ÉO: Deploy em PRODU√á√ÉO!"
          echo "Usu√°rio: ${{ github.event.inputs.name }}"
          echo "URL: https://meuapp.com"
          echo "Este deploy precisa de aprova√ß√£o!"
          echo "Deploy PROD conclu√≠do!"