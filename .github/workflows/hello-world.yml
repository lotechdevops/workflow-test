name: ğŸš€ Meu Primeiro Workflow

# Quando executar este workflow
on:
  push:
    branches: [main]
  pull_request:
    branches: [main]
  workflow_dispatch:  # Permite execuÃ§Ã£o manual

# DefiniÃ§Ã£o dos jobs
jobs:
  # Job 1: InformaÃ§Ãµes bÃ¡sicas
  info:
    name: "ğŸ“‹ InformaÃ§Ãµes do RepositÃ³rio"
    runs-on: ubuntu-latest
    
    steps:
      - name: "ğŸ“¥ Fazer checkout do cÃ³digo"
        uses: actions/checkout@v4
        
      - name: "â„¹ï¸ Mostrar informaÃ§Ãµes do workflow"
        run: |
          echo "ğŸ  RepositÃ³rio: ${{ github.repository }}"
          echo "ğŸŒ¿ Branch: ${{ github.ref_name }}"
          echo "ğŸ‘¤ Autor: ${{ github.actor }}"
          echo "ğŸ“… Data: $(date)"
          echo "ğŸ–¥ï¸ Runner: $(uname -a)"
          
      - name: "ğŸ“‚ Listar arquivos do repositÃ³rio"
        run: |
          echo "ğŸ“ Estrutura do repositÃ³rio:"
          ls -la
          echo ""
          echo "ğŸ“ ConteÃºdo da pasta .github:"
          ls -la .github/ || echo "Pasta .github nÃ£o existe"
          echo ""
          echo "ğŸ“ Workflows disponÃ­veis:"
          ls -la .github/workflows/ || echo "Pasta workflows nÃ£o existe"

  # Job 2: Teste simples (executa em paralelo com 'info')
  teste:
    name: "ğŸ§ª Testes BÃ¡sicos"
    runs-on: ubuntu-latest
    
    steps:
      - name: "ğŸ“¥ Checkout do cÃ³digo"
        uses: actions/checkout@v4
        
      - name: "âœ… Verificar se README existe"
        run: |
          if [ -f "README.md" ]; then
            echo "âœ… README.md encontrado!"
            echo "ğŸ“„ ConteÃºdo do README:"
            cat README.md
          else
            echo "âŒ README.md nÃ£o encontrado"
            exit 1
          fi
          
      - name: "ğŸ” Verificar estrutura do projeto"
        run: |
          echo "ğŸ” Verificando estrutura necessÃ¡ria..."
          
          # Verificar se pasta .github existe
          if [ -d ".github" ]; then
            echo "âœ… Pasta .github existe"
          else
            echo "âŒ Pasta .github nÃ£o existe"
          fi
          
          # Verificar se pasta workflows existe
          if [ -d ".github/workflows" ]; then
            echo "âœ… Pasta .github/workflows existe"
            echo "ğŸ“ Workflows encontrados:"
            ls -la .github/workflows/
          else
            echo "âŒ Pasta .github/workflows nÃ£o existe"
          fi
          
  # Job 3: NotificaÃ§Ã£o (executa apÃ³s os outros terminarem)
  notificacao:
    name: "ğŸ“¢ FinalizaÃ§Ã£o"
    runs-on: ubuntu-latest
    needs: [info, teste]  # Aguarda os jobs anteriores terminarem
    if: always()  # Executa mesmo se outros jobs falharem
    
    steps:
      - name: "ğŸ‰ Workflow concluÃ­do"
        run: |
          echo "ğŸŠ ParabÃ©ns! Seu primeiro workflow foi executado com sucesso!"
          echo ""
          echo "ğŸ“Š Status dos jobs anteriores:"
          echo "   ğŸ“‹ Info: ${{ needs.info.result }}"
          echo "   ğŸ§ª Teste: ${{ needs.teste.result }}"
          echo ""
          if [ "${{ needs.info.result }}" = "success" ] && [ "${{ needs.teste.result }}" = "success" ]; then
            echo "âœ… Todos os jobs foram bem-sucedidos!"
          else
            echo "âš ï¸ Alguns jobs apresentaram problemas."
          fi

  # Job 4: Experimento com diferentes sistemas operacionais
  multi-os:
    name: "ğŸ–¥ï¸ Teste Multi-OS"
    runs-on: ${{ matrix.os }}
    strategy:
      matrix:
        os: [ubuntu-latest, windows-latest, macos-latest]
    
    steps:
      - name: "ğŸ“¥ Checkout"
        uses: actions/checkout@v4
        
      - name: "ğŸ–¥ï¸ Mostrar informaÃ§Ãµes do sistema"
        run: |
          echo "ğŸ–¥ï¸ Sistema operacional: ${{ runner.os }}"
          echo "ğŸ“ Arquitetura: ${{ runner.arch }}"
          
      - name: "ğŸ§ Comandos especÃ­ficos do Linux"
        if: runner.os == 'Linux'
        run: |
          echo "ğŸ§ Executando no Linux!"
          uname -a
          lscpu | head -5
          
      - name: "ğŸªŸ Comandos especÃ­ficos do Windows"
        if: runner.os == 'Windows'
        run: |
          echo "ğŸªŸ Executando no Windows!"
          systeminfo | findstr "OS Name"
          
      - name: "ğŸ Comandos especÃ­ficos do macOS"
        if: runner.os == 'macOS'
        run: |
          echo "ğŸ Executando no macOS!"
          sw_vers